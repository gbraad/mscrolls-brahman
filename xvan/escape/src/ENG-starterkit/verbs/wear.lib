
$VERB wear
 PROLOGUE
   if not(testflag(o_actor.f_alive)) then
     if trigger(o_actor.t_talk_to_dead) then
       disagree()
     endif
   endif

   if not(equal(o_subject, %none)) then
     if not(testflag(o_subject.f_wearable)) then
       printcr("[the] [o_subject] is not something that can be worn.")
       disagree()
     else
       if testflag(o_subject.f_worn) then
         printcr("But [the] [o_actor] [o_actor.r_is] already wearing [the] [o_subject].")
         disagree()
     endif

 "wear"
    if equal(o_actor, o_player) then
      printcr("What do you want to wear?")
    else
      printcr("What do you want [the] [o_actor] to wear?")
    endif
    getsubject()

 "wear [o_subject]"
   DISAMBIGUATION_RULES
    if owns(o_actor, o_subject) AND not(equal(o_subject, o_nst)) then score(5) endif
    if testflag(o_subject.f_wearable) then
      if not(testflag(o_subject.f_worn)) then
        score(10)
      else
        score(5)
      endif
    endif
   END_RULES

   if not(owns(o_actor, o_subject)) then
     printcr("[[picking up [the] [o_subject] first.")
     move(o_subject, o_actor)
     setflag(o_subject.f_bypass)
   endif

   setflag(o_subject.f_worn)
   printcr("Ok, [the] [o_actor] [o_actor.r_is] now wearing [the] [o_subject].")

 DEFAULT
   printcr("I only understood you as far as willing to wear something.")

ENDVERB

